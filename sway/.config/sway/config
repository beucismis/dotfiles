# Variables

set {
    $mod Mod4

    $bg_color "#225877"
    $wallpaper "$HOME/.dotfiles/.wallpaper.jpg"

    $language "tr"
    $keyboard "1:1:AT_Translated_Set_2_keyboard"
    $touchpad "1739:52967:SYNA32E4:00_06CB:CEE7_Touchpad"

    $terminal foot
    $menu wmenu-run -b
    $zooming-tool wooz
    $radio radiotray-ng
    $web-browser librewolf
    $calculator gnome-calculator
    $colorpicker hyprpicker -ard && notify-send $(wl-paste)

    $wobsock $XDG_RUNTIME_DIR/wob.sock
    $gnome-schema org.gnome.desktop.interface
}

# Output & Input configuration

output {
    # "eDP-1" bg $bg_color solid_color
    # "eDP-2" bg $bg_color solid_color
	"eDP-1" background $wallpaper fill
	"eDP-2" background $wallpaper fill
}

input $keyboard {
    xkb_layout $language
	xkb_numlock enabled
}

input $touchpad {
    dwt enabled
    tap enabled
    natural_scroll enabled
    middle_emulation enabled
    scroll_method two_finger
}

# Container configurations

gaps inner 5
default_border pixel 3

# Status bar

bar {
    position top
    swaybar_command waybar
}

# Moving around

bindsym {
    $mod+Left focus left
    $mod+Down focus down
    $mod+Up focus up
    $mod+Right focus right

    $mod+Shift+Left move left
    $mod+Shift+Down move down
    $mod+Shift+Up move up
    $mod+Shift+Right move right
}

# Resizing containers

bindsym $mod+r mode "resize"

mode "resize" {
    bindsym {
        Return mode "default"
        Escape mode "default"

        Right resize shrink width 10px
        Up resize grow height 10px
        Down resize shrink height 10px
        Left resize grow width 10px
    }
}

# Layout stuff

popup_during_fullscreen smart

bindsym {
    $mod+b splith
    $mod+v splitv
    $mod+t layout tabbed
    $mod+s layout stacking
    $mod+e layout toggle split

    $mod+f fullscreen
    $mod+a focus parent
    $mod+space focus mode_toggle
    $mod+Shift+space floating toggle
}

for_window {
	[instance="Minecraft*"] floating enable

	[title="About*"] floating enable
    [title="about*"] floating enable
	[title="Hakkında*"] floating enable
    [title="hakkında*"] floating enable
	[title="OCR Result"] floating enable

    [class="vesktop"] floating enable
	[app_id="pcmanfm"] floating enable
    [app_id="pavucontrol"] floating enable
    [app_id="nm-connection-*"] floating enable
	[app_id="org.telegram.desktop"] floating enable
    [app_id="org.gnome.FileRoller"] floating enable
    [app_id="org.gnome.Calculator"] floating enable
    [app_id="org.keepassxc.KeePassXC"] floating enable
    [app_id="io.github.quodlibet.QuodLibet"] floating enable
}

for_window [shell="xwayland"] title_format "[XWayland] %title"

# Workspaces

set $w workspace
set $c container

bindsym {
    Control+Left $w prev
    Control+Right $w next

    $mod+1 $w number 1
    $mod+2 $w number 2
    $mod+3 $w number 3
    $mod+4 $w number 4
    $mod+5 $w number 5
    $mod+6 $w number 6
    $mod+7 $w number 7
    $mod+8 $w number 8
    $mod+9 $w number 9
    $mod+0 $w number 10

    $mod+Shift+1 move $c to $w number 1
    $mod+Shift+2 move $c to $w number 2
    $mod+Shift+3 move $c to $w number 3
    $mod+Shift+4 move $c to $w number 4
    $mod+Shift+5 move $c to $w number 5
    $mod+Shift+6 move $c to $w number 6
    $mod+Shift+7 move $c to $w number 7
    $mod+Shift+8 move $c to $w number 8
    $mod+Shift+9 move $c to $w number 9
    $mod+Shift+0 move $c to $w number 10
}

# Scratchpad

bindsym {
    $mod+minus scratchpad show
    $mod+Shift+minus move scratchpad
}

# Basics & Shortcuts

floating_modifier $mod normal

bindsym {
    # TODO: XF86Launch2 exec

    $mod+q kill
    $mod+Shift+r reload

    $mod+Return exec $terminal
    $mod+m exec $menu
    $mod+z exec $zooming-tool
    $mod+1+r exec $radio
    $mod+w exec $web-browser
    $mod+p exec $colorpicker
    $mod+o exec bash /home/$USER/.dotfiles/scripts/ocr.sh
    XF86Calculator exec GTK_THEME=Adwaita:dark $calculator

    # Backlight Control
    XF86MonBrightnessUp exec brightnessctl set +1% -m | cut -d, -f4 | tr -d '%' > $wobsock
    XF86MonBrightnessDown exec brightnessctl set 1%- -m | cut -d, -f4 | tr -d '%' > $wobsock

    # Sound Control
    XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
    XF86AudioLowerVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 1%- && wpctl get-volume @DEFAULT_AUDIO_SINK@ | awk '{print $2*100}' > $wobsock
    XF86AudioRaiseVolume exec wpctl set-volume -l 1.0 @DEFAULT_AUDIO_SINK@ 1%+ && wpctl get-volume @DEFAULT_AUDIO_SINK@ | awk '{print $2*100}' > $wobsock

    # Screenshot
	Shift+Print exec grimshot copy output && notify-send -i edit-copy "Screenshot" "Full screen copied to clipboard"
	Shift+Alt+Print exec grimshot copy active && notify-send -i edit-copy "Screenshot" "Active window copied to clipboard"
	Shift+Ctrl+Print exec grimshot copy area && notify-send -i edit-copy "Screenshot" "Selected area copied to clipboard"
	Print exec grimshot save output $HOME/screenshots/$(date +"%Y-%m-%d-%I-%M-%S-%p").png && notify-send -i camera-photo "Screenshot" "Full screen saved to folder"
	Alt+Print exec grimshot save active $HOME/screenshots/$(date +"%Y-%m-%d-%I-%M-%S-%p").png && notify-send -i camera-photo "Screenshot" "Active window saved to folder"
	Ctrl+Print exec grimshot save area $HOME/screenshots/$(date +"%Y-%m-%d-%I-%M-%S-%p").png && notify-send -i camera-photo "Screenshot" "Selected area saved to folder"
}

# Idle

set $screenlock grim -s 0.3 /tmp/lock-image.png && swaylock -f -i /tmp/lock-image.png
# exec swayidle -w timeout 300 '$screenlock' timeout 600 'swaymsg "output * power off"' resume 'swaymsg "output * power on"' before-sleep 'swaylock -f -c 000000'
# bindsym XF86Launch2 exec bash -c "$screenlock"

# exec "wlgreet --command sway; swaymsg exit"
bindsym	$mod+Shift+e exec swaynag -t default -m "What do you want to do?" -b "Poweroff" "systemctl poweroff" -b "Reboot" "systemctl reboot" -b "Exit" "swaymsg exit" -b "Suspend" "systemctl suspend"

# Auto start

exec_always {
	dbus-update-activation-environment WAYLAND_DISPLAY DISPLAY XDG_CURRENT_DESKTOP SWAYSOCK I3SOCK XCURSOR_SIZE XCURSOR_THEME

    gsettings set "$gnome-schema" font-name "Source Code Pro"
    gsettings set "$gnome-schema" gtk-theme "Adwaita-dark"
    gsettings set "$gnome-schema" icon-theme "buuf-nestort"
    gsettings set "$gnome-schema" cursor-theme "ComixCursors-Black"

    mako
    kdeconnectd
    poweralertd -S
    nm-applet --indicator

    rm -f $wobsock && mkfifo $wobsock && tail -f $wobsock | wob
}

include /etc/sway/config-vars.d/*
